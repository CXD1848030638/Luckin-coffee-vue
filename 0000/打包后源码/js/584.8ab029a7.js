"use strict";(self["webpackChunkrx_ts"]=self["webpackChunkrx_ts"]||[]).push([[584],{6478:function(e,t,a){a.d(t,{Z:function(){return c}});var n=a(3396);const i={class:"navi"};function r(e,t,a,r,l,s){const d=(0,n.up)("van-nav-bar");return(0,n.wg)(),(0,n.iD)("div",i,[(0,n.Wm)(d,{title:e.title,"left-text":"返回","right-text":e.rightText,fixed:e.fixed,"left-arrow":"",onClickLeft:e.back,onClickRight:e.clickRight},null,8,["title","right-text","fixed","onClickLeft","onClickRight"])])}var l=a(678),s=(0,n.aZ)({name:"Navi",props:{title:{type:String,default:""},rightText:{type:String,default:""},fixed:{type:Boolean,default:!1}},setup(e,{emit:t}){let a=(0,l.tv)(),n=()=>{a.go(-1)},i=()=>{t("click-right")};return{back:n,clickRight:i}}}),d=a(89);const u=(0,d.Z)(s,[["render",r],["__scopeId","data-v-40ff0b7a"]]);var c=u},9584:function(e,t,a){a.r(t),a.d(t,{default:function(){return N}});var n=a(3396),i=a(7139),r=a(9242);const l=e=>((0,n.dD)("data-v-a2507d10"),e=e(),(0,n.Cn)(),e),s={class:"account"},d=l((()=>(0,n._)("div",{class:"account-bg"},null,-1))),u={class:"list-box"},c={class:"avatar"},o=["src"],f={class:"fr"},m={class:"fr"},v={class:"fr"},p={class:"desc-box"},g=l((()=>(0,n._)("div",{class:"desc-title"},"简介",-1)));function h(e,t,a,l,h,I){const _=(0,n.up)("Navi"),x=(0,n.up)("van-uploader"),k=(0,n.up)("van-cell");return(0,n.wg)(),(0,n.iD)("div",s,[(0,n.Wm)(_,{title:"个人资料",fixed:!0}),d,(0,n._)("div",u,[(0,n.Wm)(k,{title:"头像"},{default:(0,n.w5)((()=>[(0,n._)("div",c,[(0,n._)("img",{class:"auto-img",src:e.userInfo.userImg,alt:""},null,8,o),(0,n.Wm)(x,{class:"uploader-box","after-read":e.uploadUserImg},null,8,["after-read"])])])),_:1}),(0,n.Wm)(k,{title:"用户id"},{default:(0,n.w5)((()=>[(0,n._)("div",f,(0,i.zw)(e.userInfo.userId),1)])),_:1}),(0,n.Wm)(k,{title:"手机号"},{default:(0,n.w5)((()=>[(0,n._)("div",m,(0,i.zw)(e.userInfo.phone),1)])),_:1}),(0,n.Wm)(k,{title:"昵称"},{default:(0,n.w5)((()=>[(0,n._)("div",v,[(0,n.wy)((0,n._)("input",{class:"nickname",type:"text","onUpdate:modelValue":t[0]||(t[0]=t=>e.userInfo.nickName=t),onChange:t[1]||(t[1]=t=>e.modifyUserInfo("nickName","/updateNickName"))},null,544),[[r.nr,e.userInfo.nickName]])])])),_:1}),(0,n._)("div",p,[g,(0,n._)("div",null,[(0,n.wy)((0,n._)("textarea",{"onUpdate:modelValue":t[2]||(t[2]=t=>e.userInfo.desc=t),class:"text-area",placeholder:"这家伙很懒，什么都没有留下",onChange:t[3]||(t[3]=t=>e.modifyUserInfo("desc","/updateDesc"))},null,544),[[r.nr,e.userInfo.desc]])])])])])}a(6743);var I=a(4691),_=a(4870),x=a(678),k=a(6478),w=a(6265),b=a.n(w),y=(0,n.aZ)({name:"Account",components:{Navi:k.Z},setup(){let e=(0,x.tv)(),t=(0,_.iH)({userImg:""}),a=(0,_.iH)(1048576),i=()=>{b()({method:"GET",url:"/findAccountInfo"}).then((a=>{if(700==a.data.code)return e.push({name:"Login"});"B001"==a.data.code&&(t.value=a.data.result[0])})).catch((e=>{}))},r=n=>{let i=n.file.type.split("/")[1],r=["png","gif","jpg","jpeg"];if(-1===r.indexOf(i))return void(0,I.Z)("图片类型只支持"+r.join(","));if(a.value<n.file.size)return void(0,I.Z)("上传文件大小不能超过"+a.value/1024+"KB");let l=n.content.replace(/data:image\/[A-Za-z]+;base64,/,"");b()({method:"POST",url:"/updateAvatar",data:{imgType:i,serverBase64Img:l}}).then((a=>{if(700==a.data.code)return e.push({name:"Login"});"H001"==a.data.code&&(t.value.userImg=a.data.userImg),(0,I.Z)(a.data.msg)})).catch((e=>{}))},l=(a,n)=>{b()({method:"POST",url:n,data:{[a]:t.value[a]}}).then((t=>{if((0,I.Z)(t.data.msg),700==t.data.code)return e.push({name:"Login"})})).catch((e=>{}))};return(0,n.bv)((()=>{i()})),{userInfo:t,maxSize:a,getUserInfo:i,uploadUserImg:r,modifyUserInfo:l}}}),Z=a(89);const C=(0,Z.Z)(y,[["render",h],["__scopeId","data-v-a2507d10"]]);var N=C}}]);
//# sourceMappingURL=584.8ab029a7.js.map