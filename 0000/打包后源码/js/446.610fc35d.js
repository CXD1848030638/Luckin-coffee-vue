"use strict";(self["webpackChunkrx_ts"]=self["webpackChunkrx_ts"]||[]).push([[446],{6478:function(t,e,o){o.d(e,{Z:function(){return d}});var s=o(3396);const a={class:"navi"};function n(t,e,o,n,l,i){const r=(0,s.up)("van-nav-bar");return(0,s.wg)(),(0,s.iD)("div",a,[(0,s.Wm)(r,{title:t.title,"left-text":"返回","right-text":t.rightText,fixed:t.fixed,"left-arrow":"",onClickLeft:t.back,onClickRight:t.clickRight},null,8,["title","right-text","fixed","onClickLeft","onClickRight"])])}var l=o(678),i=(0,s.aZ)({name:"Navi",props:{title:{type:String,default:""},rightText:{type:String,default:""},fixed:{type:Boolean,default:!1}},setup(t,{emit:e}){let o=(0,l.tv)(),s=()=>{o.go(-1)},a=()=>{e("click-right")};return{back:s,clickRight:a}}}),r=o(89);const c=(0,r.Z)(i,[["render",n],["__scopeId","data-v-40ff0b7a"]]);var d=c},7446:function(t,e,o){o.r(e),o.d(e,{default:function(){return y}});var s=o(3396);const a=t=>((0,s.dD)("data-v-44db3aa0"),t=t(),(0,s.Cn)(),t),n={class:"secure"},l=a((()=>(0,s._)("div",{class:"secure-bg"},null,-1))),i={class:"secure-box"},r={class:"btn-box"},c=(0,s.Uk)("退出登录"),d={class:"popup-item"},u=a((()=>(0,s._)("div",{class:"password-text"},"修改密码",-1))),p={class:"login-btn"},m=(0,s.Uk)("确认修改");function w(t,e,o,a,w,v){const f=(0,s.up)("Navi"),g=(0,s.up)("van-cell"),k=(0,s.up)("van-button"),h=(0,s.up)("van-field"),C=(0,s.up)("van-form"),b=(0,s.up)("van-popup");return(0,s.wg)(),(0,s.iD)("div",n,[(0,s.Wm)(f,{title:"安全中心",fixed:!0}),l,(0,s._)("div",i,[(0,s._)("div",null,[(0,s.Wm)(g,{title:"修改密码",isLink:"",onClick:t.openPasswordPopup},null,8,["onClick"]),(0,s.Wm)(g,{title:"注销账号",isLink:"",onClick:t.destroyAccount},null,8,["onClick"])])]),(0,s._)("div",r,[(0,s.Wm)(k,{round:"",block:"",color:"#0C34BA",onClick:t.logout},{default:(0,s.w5)((()=>[c])),_:1},8,["onClick"])]),(0,s.Wm)(b,{class:"popup-box",closeable:"",show:t.isOpen,"onUpdate:show":e[0]||(e[0]=e=>t.isOpen=e),position:"bottom"},{default:(0,s.w5)((()=>[(0,s._)("div",d,[u,(0,s.Wm)(C,null,{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(t.passwords,((e,o)=>((0,s.wg)(),(0,s.j4)(h,{key:o,type:e.isPassword?"password":"text",label:e.title,placeholder:"输入密码",modelValue:e.password,"onUpdate:modelValue":t=>e.password=t,"right-icon":e.isPassword?"closed-eye":"eye-o",onClickRightIcon:o=>t.viewPassword(e),autocomplete:"off"},null,8,["type","label","modelValue","onUpdate:modelValue","right-icon","onClickRightIcon"])))),128)),(0,s._)("div",p,[(0,s.Wm)(k,{round:"",block:"",color:"#0C34BA","native-type":"submit",onClick:t.confirmPassword},{default:(0,s.w5)((()=>[m])),_:1},8,["onClick"])])])),_:1})])])),_:1},8,["show"])])}o(6743);var v=o(4691),f=(o(9905),o(9636)),g=o(4870),k=o(6478),h=o(678),C=o(6265),b=o.n(C),P=(0,s.aZ)({components:{Navi:k.Z},setup(){let t=(0,h.tv)(),e=(0,g.iH)(!1),o=(0,g.iH)({old:{password:"",isPassword:!0,title:"旧密码"},new:{password:"",isPassword:!0,title:"新密码"}}),s=t=>{t.isPassword=!t.isPassword},a=()=>{f.Z.confirm({title:"退出登录",message:"是否确认退出登录！",confirmButtonColor:"#0C34BA"}).then((()=>{localStorage.removeItem("token"),setTimeout((()=>{t.push({name:"Login"})}),1e3)}))},n=()=>{e.value=!0},l=()=>{b()({method:"POST",url:"/updatePassword",data:{oldPassword:o.value.old.password,password:o.value.new.password}}).then((e=>{(0,v.Z)(e.data.msg),"E001"==e.data.code&&(localStorage.removeItem("token"),setTimeout((()=>{t.push({name:"Login"})}),1e3))})).catch((t=>{}))},i=()=>{f.Z.confirm({title:"注销账号",message:"是否确认注销号，一旦确认无法恢复！",confirmButtonColor:"#0C34BA"}).then((()=>{b()({method:"POST",url:"/destroyAccount"}).then((e=>{(0,v.Z)(e.data.msg),"G001"==e.data.code&&(localStorage.removeItem("token"),setTimeout((()=>{t.push({name:"Login"})}),1e3))})).catch((t=>{}))})).catch((t=>{}))};return{isOpen:e,passwords:o,viewPassword:s,logout:a,openPasswordPopup:n,confirmPassword:l,destroyAccount:i}}}),x=o(89);const _=(0,x.Z)(P,[["render",w],["__scopeId","data-v-44db3aa0"]]);var y=_}}]);
//# sourceMappingURL=446.610fc35d.js.map