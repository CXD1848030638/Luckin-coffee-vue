"use strict";(self["webpackChunkrx_ts"]=self["webpackChunkrx_ts"]||[]).push([[906],{4716:function(e,a,t){t.d(a,{Z:function(){return w}});var o=t(3396),r=t(7139),l=t(9242);const s={class:"product"},c={class:"img-box"},i=["src"],n={class:"product-name one-text"},u={class:"product-enname one-text"},v={class:"pro-info"},d={class:"product-price"},p={key:0,class:"badge-box"},m=(0,o.Uk)("热卖");function h(e,a,t,h,k,g){const f=(0,o.up)("van-icon"),w=(0,o.up)("van-tag");return(0,o.wg)(),(0,o.iD)("div",s,[(0,o._)("div",c,[(0,o._)("img",{class:"auto-img",src:e.pro.smallImg,alt:""},null,8,i)]),(0,o._)("div",n,(0,r.zw)(e.pro.name),1),(0,o._)("div",u,(0,r.zw)(e.pro.enname),1),(0,o._)("div",v,[(0,o._)("div",d,"¥"+(0,r.zw)(e.pro.price),1),e.isRemove?((0,o.wg)(),(0,o.iD)("div",{key:0,class:"pro-remove",onClick:a[0]||(a[0]=(0,l.iM)(((...a)=>e.remove&&e.remove(...a)),["stop"]))},[(0,o.Wm)(f,{name:"delete-o"})])):(0,o.kq)("",!0)]),1===e.pro.isHot?((0,o.wg)(),(0,o.iD)("div",p,[(0,o.Wm)(w,{mark:"",color:"#e4393c"},{default:(0,o.w5)((()=>[m])),_:1})])):(0,o.kq)("",!0)])}var k=(0,o.aZ)({props:{pro:{type:Object,default(){return{}}},isRemove:{type:Boolean,default:!1}},setup(e,{emit:a}){let t=()=>{a("remove")};return{remove:t}}}),g=t(89);const f=(0,g.Z)(k,[["render",h],["__scopeId","data-v-6e707602"]]);var w=f},3906:function(e,a,t){t.r(a),t.d(a,{default:function(){return _}});var o=t(3396),r=t(7139),l=t(9242);const s={class:"search"},c={class:"search-history"},i={class:"history-box"},n=["onClick"],u={class:"pro-box"},v=["onClick"];function d(e,a,t,d,p,m){const h=(0,o.up)("van-search"),k=(0,o.up)("van-nav-bar"),g=(0,o.up)("van-icon"),f=(0,o.up)("Product");return(0,o.wg)(),(0,o.iD)("div",s,[(0,o.Wm)(k,{fixed:!0,"left-text":"返回","left-arrow":"",onClickLeft:e.back},{right:(0,o.w5)((()=>[(0,o.Wm)(h,{modelValue:e.keyword,"onUpdate:modelValue":a[0]||(a[0]=a=>e.keyword=a),"show-action":"",placeholder:"输入商品关键字",autofocus:!0,autocomplete:"off",shape:"round",onInput:e.search,onSearch:e.search},null,8,["modelValue","onInput","onSearch"])])),_:1},8,["onClickLeft"]),(0,o.wy)((0,o._)("div",c,[(0,o._)("div",i,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.keywords,((a,t)=>((0,o.wg)(),(0,o.iD)("div",{class:"history-item",key:t,onClick:t=>e.quickSearch(a.title)},[(0,o.Uk)((0,r.zw)(a.title)+" ",1),(0,o.Wm)(g,{onClick:(0,l.iM)((a=>e.removeOne(t)),["stop"]),name:"cross"},null,8,["onClick"])],8,n)))),128))]),(0,o._)("div",{class:"search-btn",onClick:a[1]||(a[1]=(...a)=>e.clearAll&&e.clearAll(...a))},"清除所有搜索历史")],512),[[l.F8,e.keywords.length>0]]),(0,o._)("div",u,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.products,((a,t)=>((0,o.wg)(),(0,o.iD)("div",{class:"pro-item",key:t,onClick:t=>e.viewDetail(a.pid)},[(0,o.Wm)(f,{pro:a},null,8,["pro"])],8,v)))),128))])])}var p=t(4870),m=t(678),h=t(6265),k=t.n(h),g=t(4716),f=(0,o.aZ)({components:{Product:g.Z},setup(){let e=(0,m.tv)(),a=(0,p.iH)(""),t=-1,r=(0,p.iH)([]),l=(0,p.iH)([]),s=()=>{e.go(-1)},c=()=>{""!==a.value.trim()&&k()({method:"get",url:"/search",params:{name:a.value}}).then((e=>{if("Q001"===e.data.code&&(r.value=e.data.result,e.data.result.length>0)){for(let e=0;e<l.value.length;e++)if(l.value[e].title===a.value)return;10===l.value.length&&l.value.splice(0,1),l.value.push({title:a.value}),localStorage.setItem("historySearch",JSON.stringify(l.value))}})).catch((e=>{}))},i=()=>{clearTimeout(t),t=setTimeout((()=>{c()}),580)},n=a=>{e.push({name:"Detail",params:{pid:a}})},u=e=>{a.value!==e&&(a.value=e,c())},v=e=>{l.value.splice(e,1),localStorage.setItem("historySearch",JSON.stringify(l.value))},d=()=>{l.value=[],localStorage.setItem("historySearch",JSON.stringify(l.value))};return(0,o.bv)((()=>{let e=localStorage.getItem("historySearch");e&&l.value.push(...JSON.parse(e))})),{keyword:a,products:r,keywords:l,search:i,back:s,viewDetail:n,quickSearch:u,removeOne:v,clearAll:d}}}),w=t(89);const y=(0,w.Z)(f,[["render",d],["__scopeId","data-v-6116870a"]]);var _=y}}]);
//# sourceMappingURL=906.8ad4293f.js.map