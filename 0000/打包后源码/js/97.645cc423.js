"use strict";(self["webpackChunkrx_ts"]=self["webpackChunkrx_ts"]||[]).push([[97],{909:function(t,e,a){a.d(e,{Z:function(){return v}});var i=a(3396);const o=t=>((0,i.dD)("data-v-06618912"),t=t(),(0,i.Cn)(),t),r={class:"bg-box"},n=o((()=>(0,i._)("div",{class:"bg"},null,-1))),c={class:"bg-content"};function s(t,e,a,o,s,l){return(0,i.wg)(),(0,i.iD)("div",r,[n,(0,i._)("div",c,[(0,i.WI)(t.$slots,"default",{},void 0,!0)])])}var l=(0,i.aZ)({name:"Bg"}),d=a(89);const u=(0,d.Z)(l,[["render",s],["__scopeId","data-v-06618912"]]);var v=u},6478:function(t,e,a){a.d(e,{Z:function(){return d}});var i=a(3396);const o={class:"navi"};function r(t,e,a,r,n,c){const s=(0,i.up)("van-nav-bar");return(0,i.wg)(),(0,i.iD)("div",o,[(0,i.Wm)(s,{title:t.title,"left-text":"返回","right-text":t.rightText,fixed:t.fixed,"left-arrow":"",onClickLeft:t.back,onClickRight:t.clickRight},null,8,["title","right-text","fixed","onClickLeft","onClickRight"])])}var n=a(678),c=(0,i.aZ)({name:"Navi",props:{title:{type:String,default:""},rightText:{type:String,default:""},fixed:{type:Boolean,default:!1}},setup(t,{emit:e}){let a=(0,n.tv)(),i=()=>{a.go(-1)},o=()=>{e("click-right")};return{back:i,clickRight:o}}}),s=a(89);const l=(0,s.Z)(c,[["render",r],["__scopeId","data-v-40ff0b7a"]]);var d=l},1642:function(t,e,a){a.d(e,{Z:function(){return D}});var i=a(3396),o=a(7139);const r={class:"shopbag-item"},n={class:"shopbag-item-img"},c=["src"],s={class:"shopbag-item-content"},l={class:"shopbag-name"},d={class:"zhname-box"},u={class:"zhname one-text"},v={class:"rule one-text"},p={class:"enname one-text"},g={class:"price-count"},m={class:"price"},f={class:"count"};function h(t,e,a,h,_,w){return(0,i.wg)(),(0,i.iD)("div",r,[(0,i._)("div",n,[(0,i._)("img",{class:"auto-img",src:t.pro.small_img,alt:""},null,8,c)]),(0,i._)("div",s,[(0,i._)("div",l,[(0,i._)("div",d,[(0,i._)("div",u,(0,o.zw)(t.pro.name),1),(0,i._)("div",v,(0,o.zw)(t.pro.rule),1)]),(0,i._)("div",p,(0,o.zw)(t.pro.enname),1)]),(0,i._)("div",g,[(0,i._)("div",m,"¥"+(0,o.zw)(t.pro.price),1),(0,i._)("div",f,"x"+(0,o.zw)(t.pro.count),1)])])])}var _=(0,i.aZ)({name:"OrderPro",props:{pro:{type:Object,default(){return{}}}}}),w=a(89);const b=(0,w.Z)(_,[["render",h],["__scopeId","data-v-29d28766"]]);var D=b},8097:function(t,e,a){a.r(e),a.d(e,{default:function(){return j}});var i=a(3396),o=a(7139),r=a(9242);const n=t=>((0,i.dD)("data-v-50a81b36"),t=t(),(0,i.Cn)(),t),c={class:"order"},s={class:"tab-content"},l=n((()=>(0,i._)("div",{class:"order-info"},"订单信息",-1))),d={class:"order-no"},u={class:"no"},v={class:"order-op"},p=["onClick"],g={key:1,class:"op"},m=n((()=>(0,i._)("div",{class:"finished"},"已完成",-1))),f=["onClick"],h={class:"order-pro"},_={class:"order-total"},w={class:"order-date"},b={class:"order-count"},D={class:"order-money"},k=n((()=>(0,i._)("div",{class:"left-circle circle"},null,-1))),x=n((()=>(0,i._)("div",{class:"right-circle circle"},null,-1)));function Z(t,e,a,n,Z,y){const C=(0,i.up)("Navi"),z=(0,i.up)("van-icon"),O=(0,i.up)("OrderPro"),H=(0,i.up)("van-empty"),W=(0,i.up)("van-tab"),R=(0,i.up)("van-tabs"),E=(0,i.up)("Bg");return(0,i.wg)(),(0,i.iD)("div",c,[(0,i.Wm)(C,{title:"我的订单",fixed:!0}),(0,i._)("div",null,[(0,i.Wm)(E,null,{default:(0,i.w5)((()=>[(0,i.Wm)(R,{active:t.active,"onUpdate:active":e[0]||(e[0]=e=>t.active=e),color:"#0C34BA","line-height":"2",animated:"",swipeable:"",onChange:t.toggleTab},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(t.tabsData,((e,a)=>((0,i.wg)(),(0,i.j4)(W,{title:e.title,key:a},{default:(0,i.w5)((()=>[(0,i._)("div",s,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(t.orderData,((e,a)=>((0,i.wg)(),(0,i.iD)("div",{class:"order-product",key:a},[l,(0,i._)("div",d,[(0,i._)("div",u,"订单编号："+(0,o.zw)(e.oid),1),(0,i._)("div",v,[1===e.status?((0,i.wg)(),(0,i.iD)("div",{key:0,onClick:i=>t.confirm(e,a)},"确认收货",8,p)):((0,i.wg)(),(0,i.iD)("div",g,[m,(0,i._)("div",{class:"remove",onClick:i=>t.removeOrder(e.oid,a)},[(0,i.Wm)(z,{name:"delete-o"})],8,f)]))])]),(0,i._)("div",h,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.product,((t,e)=>((0,i.wg)(),(0,i.iD)("div",{class:"order-pro-item",key:e},[(0,i.Wm)(O,{pro:t},null,8,["pro"])])))),128))]),(0,i._)("div",_,[(0,i._)("div",w,(0,o.zw)(e.date),1),(0,i._)("div",b,"共计 "+(0,o.zw)(e.count)+" 件商品",1),(0,i._)("div",D,"订单金额：¥"+(0,o.zw)(e.total),1),k,x])])))),128)),(0,i.wy)((0,i.Wm)(H,{description:"没有订单数据！"},null,512),[[r.F8,0===t.orderData.length]])])])),_:2},1032,["title"])))),128))])),_:1},8,["active","onChange"])])),_:1})])])}a(9905);var y=a(9636),C=(a(6743),a(4691)),z=a(4870),O=a(6478),H=a(909),W=a(1642),R=a(6265),E=a.n(R),I=a(678);class B{formatDate(t,e){Object.prototype.toString.call(t)!==["object Date"]&&(t=new Date(t));let a=/(y+)/;if(a.test(e)){let a=RegExp.$1,i=t.getFullYear().toString(),o=i.slice(4-a.length);e=e.replace(a,o)}let i={M:t.getMonth()+1,d:t.getDate(),h:t.getHours(),m:t.getMinutes(),s:t.getSeconds()};for(let o in i){let t=new RegExp(`(${o}+)`);if(t.test(e)){let t=RegExp.$1;e=e.replace(t,1===t.length||i[o]>=10?i[o]:`0${i[o]}`)}}return e}}const L=new B;var M=(0,i.aZ)({name:"Order",components:{Navi:O.Z,Bg:H.Z,OrderPro:W.Z},setup(){let t=(0,I.tv)(),e=(0,z.iH)(0),a=(0,z.iH)(0),o=(0,z.iH)(0),r=(0,z.iH)([{title:"全部"},{title:"进行中"},{title:"已完成"}]),n=(0,z.iH)([]),c=()=>{E()({method:"get",url:"/findOrder",params:{status:e.value}}).then((e=>{if(700===e.data.code)return(0,C.Z)(e.data.msg),void t.push({name:"Login"});if(7e4===e.data.code){let t=[];e.data.result.forEach((e=>{e.small_img=e.smallImg,-1===t.indexOf(e.oid)&&t.push(e.oid)}));let a=[];t.forEach((t=>{let i={oid:t,product:[],count:0,total:0};e.data.result.forEach((e=>{t===e.oid&&(void 0===i.status&&(i.status=e.status,i.date=L.formatDate(e.createdAt,"yyyy-MM-dd hh:mm:ss")),i.product.push(e),i.count+=e.count,i.total+=e.count*e.price)})),a.push(i)})),n.value=a}})).catch((t=>{}))},s=()=>{c()},l=(a,i)=>{y.Z.confirm({message:"是否确定收货？"}).then((()=>{E()({method:"post",url:"/receive",data:{oid:a.oid}}).then((o=>{(0,C.Z)(o.data.msg),700!==o.data.code?8e4===o.data.code&&(0===e.value?a.status=2:1===a.status&&n.value.splice(i,1)):t.push({name:"Login"})})).catch((t=>{}))})).catch((t=>{}))},d=(e,a)=>{y.Z.confirm({message:"是否确定删除该订单？"}).then((()=>{E()({method:"post",url:"/removeOrder",data:{oid:e}}).then((e=>{(0,C.Z)(e.data.msg),700!==e.data.code?9e4===e.data.code&&n.value.splice(a,1):t.push({name:"Login"})})).catch((t=>{}))})).catch((t=>{}))};return(0,i.bv)((()=>{c()})),{active:e,count:a,total:o,tabsData:r,orderData:n,toggleTab:s,confirm:l,removeOrder:d}}}),S=a(89);const $=(0,S.Z)(M,[["render",Z],["__scopeId","data-v-50a81b36"]]);var j=$}}]);
//# sourceMappingURL=97.645cc423.js.map