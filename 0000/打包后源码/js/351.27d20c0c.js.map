{"version":3,"file":"js/351.27d20c0c.js","mappings":"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","sources":["webpack://rx-ts/./src/components/Navi.vue?005f","webpack://rx-ts/./src/components/Navi.vue?a4f4","webpack://rx-ts/./src/components/Navi.vue","webpack://rx-ts/./src/views/Detail.vue?aec8","webpack://rx-ts/./src/views/Detail.vue?8b48","webpack://rx-ts/./src/views/Detail.vue"],"sourcesContent":["import { resolveComponent as _resolveComponent, createVNode as _createVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-40ff0b7a\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"navi\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_van_nav_bar = _resolveComponent(\"van-nav-bar\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createVNode(_component_van_nav_bar, {\n      title: _ctx.title,\n      \"left-text\": \"返回\",\n      \"right-text\": _ctx.rightText,\n      fixed: _ctx.fixed,\n      \"left-arrow\": \"\",\n      onClickLeft: _ctx.back,\n      onClickRight: _ctx.clickRight\n    }, null, 8, [\"title\", \"right-text\", \"fixed\", \"onClickLeft\", \"onClickRight\"])\n  ]))\n}","\r\nimport { defineComponent } from 'vue'\r\n\r\nimport { useRouter } from 'vue-router'\r\n\r\nexport default defineComponent({\r\n\r\n  name: 'Navi',\r\n\r\n  props: {\r\n      title: {\r\n        type: String,\r\n        default: ''\r\n      },\r\n      rightText: {\r\n        type: String,\r\n        default: ''\r\n      },\r\n      fixed: {\r\n        type: Boolean,\r\n        default: false\r\n      }\r\n    },\r\n  \r\n  setup (props, {emit}) {\r\n    let router: any = useRouter();\r\n\r\n    let back: () => void = (): void => {\r\n        router.go(-1);\r\n      }\r\n\r\n\r\n      let clickRight: () => void = (): void => {\r\n        emit('click-right');\r\n      }\r\n\r\n    return {\r\n      back,\r\n      clickRight\r\n    }\r\n  }\r\n})\r\n","import { render } from \"./Navi.vue?vue&type=template&id=40ff0b7a&scoped=true&ts=true\"\nimport script from \"./Navi.vue?vue&type=script&lang=ts\"\nexport * from \"./Navi.vue?vue&type=script&lang=ts\"\n\nimport \"./Navi.vue?vue&type=style&index=0&id=40ff0b7a&lang=less&scoped=true\"\n\nimport exportComponent from \"D:\\\\database\\\\rx-ts-project\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-40ff0b7a\"]])\n\nexport default __exports__","import { resolveComponent as _resolveComponent, createVNode as _createVNode, createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, normalizeClass as _normalizeClass, withCtx as _withCtx, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-5ddea1b1\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"detail\" }\nconst _hoisted_2 = { class: \"detail-img\" }\nconst _hoisted_3 = [\"src\"]\nconst _hoisted_4 = { class: \"detail-info\" }\nconst _hoisted_5 = { class: \"detail-pro\" }\nconst _hoisted_6 = { class: \"detail-name one-text\" }\nconst _hoisted_7 = { class: \"detail-enname one-text\" }\nconst _hoisted_8 = { class: \"detail-price\" }\nconst _hoisted_9 = { class: \"detail-rules\" }\nconst _hoisted_10 = { class: \"rules-title\" }\nconst _hoisted_11 = { class: \"rules\" }\nconst _hoisted_12 = [\"onClick\"]\nconst _hoisted_13 = { class: \"select-count-box\" }\nconst _hoisted_14 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"select-text\" }, \"选择数量\", -1))\nconst _hoisted_15 = { class: \"select-count\" }\nconst _hoisted_16 = { class: \"detail-desc\" }\nconst _hoisted_17 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"detail-desc-title\" }, \"商品描述\", -1))\nconst _hoisted_18 = { class: \"detail-desc-content\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_Navi = _resolveComponent(\"Navi\")!\n  const _component_van_stepper = _resolveComponent(\"van-stepper\")!\n  const _component_van_action_bar_icon = _resolveComponent(\"van-action-bar-icon\")!\n  const _component_van_action_bar_button = _resolveComponent(\"van-action-bar-button\")!\n  const _component_van_action_bar = _resolveComponent(\"van-action-bar\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createVNode(_component_Navi, {\n      title: \"商品详情\",\n      fixed: true\n    }),\n    _createElementVNode(\"div\", null, [\n      _createElementVNode(\"div\", _hoisted_2, [\n        _createElementVNode(\"img\", {\n          class: \"auto-img\",\n          src: _ctx.productDetail.large_img,\n          alt: \"\"\n        }, null, 8, _hoisted_3)\n      ]),\n      _createElementVNode(\"div\", _hoisted_4, [\n        _createElementVNode(\"div\", _hoisted_5, [\n          _createElementVNode(\"div\", null, [\n            _createElementVNode(\"div\", _hoisted_6, _toDisplayString(_ctx.productDetail.name), 1),\n            _createElementVNode(\"div\", _hoisted_7, _toDisplayString(_ctx.productDetail.enname), 1)\n          ]),\n          _createElementVNode(\"div\", _hoisted_8, \"¥\" + _toDisplayString(_ctx.productDetail.price), 1)\n        ]),\n        _createElementVNode(\"div\", _hoisted_9, [\n          (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.productDetail.rulesData, (v1, i1) => {\n            return (_openBlock(), _createElementBlock(\"div\", {\n              class: \"detail-rules-item\",\n              key: i1\n            }, [\n              _createElementVNode(\"div\", _hoisted_10, _toDisplayString(v1.title), 1),\n              _createElementVNode(\"div\", _hoisted_11, [\n                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(v1.subRule, (v2, i2) => {\n                  return (_openBlock(), _createElementBlock(\"div\", {\n                    class: _normalizeClass([\"rules-item\", { active: i2 === v1.activeIndex }]),\n                    key: i2,\n                    onClick: ($event: any) => (_ctx.selectRule(v1, i2))\n                  }, _toDisplayString(v2.title), 11, _hoisted_12))\n                }), 128))\n              ])\n            ]))\n          }), 128))\n        ]),\n        _createElementVNode(\"div\", _hoisted_13, [\n          _hoisted_14,\n          _createElementVNode(\"div\", _hoisted_15, [\n            _createVNode(_component_van_stepper, {\n              modelValue: _ctx.count,\n              \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => ((_ctx.count) = $event)),\n              theme: \"round\",\n              \"button-size\": \"22\",\n              \"disable-input\": \"\"\n            }, null, 8, [\"modelValue\"])\n          ])\n        ]),\n        _createElementVNode(\"div\", _hoisted_16, [\n          _hoisted_17,\n          _createElementVNode(\"div\", _hoisted_18, [\n            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.productDetail.desc, (item, index) => {\n              return (_openBlock(), _createElementBlock(\"div\", {\n                class: \"desc-item\",\n                key: index\n              }, _toDisplayString(index + 1) + \"、\" + _toDisplayString(item), 1))\n            }), 128))\n          ])\n        ])\n      ])\n    ]),\n    _createVNode(_component_van_action_bar, null, {\n      default: _withCtx(() => [\n        _createVNode(_component_van_action_bar_icon, {\n          to: { name: 'Shopbag' },\n          icon: \"bag\",\n          text: \"购物袋\",\n          color: \"#646566\",\n          badge: _ctx.shopbagCount\n        }, null, 8, [\"badge\"]),\n        _createVNode(_component_van_action_bar_icon, {\n          icon: \"like\",\n          text: _ctx.isLike ? '已收藏' : '收藏',\n          color: _ctx.isLike ? '#e4393c' : '#646566',\n          onClick: _ctx.likeProduct\n        }, null, 8, [\"text\", \"color\", \"onClick\"]),\n        _createVNode(_component_van_action_bar_button, {\n          color: \"#0C34BA\",\n          text: \"加入购物袋\",\n          onClick: _cache[1] || (_cache[1] = ($event: any) => (_ctx.addShopbag()))\n        })\n      ]),\n      _: 1\n    })\n  ]))\n}","\r\nimport { defineComponent, ref, onMounted } from \"vue\";\r\n\r\nimport Navi from \"../components/Navi.vue\";\r\n\r\nimport axios from \"axios\";\r\n\r\nimport { useRouter, useRoute } from \"vue-router\";\r\n\r\nimport { Toast } from \"vant\";\r\n\r\nexport default defineComponent({\r\n  components: {\r\n    Navi,\r\n  },\r\n\r\n  setup() {\r\n    let router: any = useRouter();\r\n\r\n    let route: any = useRoute();\r\n\r\n    let count: any = ref<number>(1);\r\n\r\n    let pid: any = ref<string>(\"\");\r\n\r\n    let productDetail: any = ref<object>({});\r\n\r\n    let isLike: any = ref<boolean>(false);\r\n\r\n    let shopbagCount: any = ref<number | string>(\"\");\r\n\r\n    //根据商品pid获取商品详情数据\r\n    let getProductDetailByPid: (pid: string) => void = (pid: string): void => {\r\n      axios({\r\n        method: \"get\",\r\n        url: \"/productDetail\",\r\n        params: {\r\n          pid,\r\n        },\r\n      })\r\n        .then((result: any): void => {\r\n          if (result.data.code === 600) {\r\n            let data: any = result.data.result[0];\r\n\r\n            data.desc = data.desc.split(/\\n/);\r\n\r\n            //处理商品规格数据\r\n            /**\r\n             * [\r\n             *  {\r\n             *    title: '温度',\r\n             *    activeIndex: 0,\r\n             *    subRule: [\r\n             *      {\r\n             *        title: '热'\r\n             *      }\r\n             *    ]\r\n             *  }\r\n             * ]\r\n             */\r\n\r\n            let rulesData: Array<any> = [];\r\n\r\n            //构造规格数组\r\n            let rules: Array<string> = [\"tem\", \"sugar\", \"milk\", \"cream\"];\r\n            rules.forEach((v1: string): void => {\r\n              if (data[v1] === \"\") {\r\n                return;\r\n              }\r\n\r\n              let rulesItem: any = {\r\n                title: data[`${v1}_desc`],\r\n                activeIndex: 0,\r\n                subRule: [],\r\n              };\r\n              let rule: Array<string> = data[v1].split(/\\//);\r\n              rule.forEach((v2: string): void => {\r\n                let r: object = { title: v2 };\r\n\r\n                rulesItem.subRule.push(r);\r\n              });\r\n\r\n              rulesData.push(rulesItem);\r\n            });\r\n\r\n            data.rulesData = rulesData;\r\n\r\n            //先处理数据, 再赋值给data数据, 否则如果为对象添加新的属性时， vue无法监听新的属性变化\r\n            productDetail.value = data;\r\n          }\r\n        })\r\n        .catch((err: any): void => {\r\n          \r\n        });\r\n    };\r\n\r\n    //选择规格\r\n    let selectRule: (item: any, index: number) => void = (\r\n      item: any,\r\n      index: number\r\n    ): void => {\r\n      if (item.activeIndex !== index) {\r\n        item.activeIndex = index;\r\n      }\r\n    };\r\n\r\n    //查询当前是否被收藏\r\n    let findCurrentLike: (pid: string) => void = (pid: string): void => {\r\n\r\n      axios({\r\n        method: \"get\",\r\n        url: \"/findlike\",\r\n        params: {\r\n          pid,\r\n        },\r\n      })\r\n        .then((result: any): void => {\r\n          if (result.data.code === 1000) {\r\n            if (result.data.result.length > 0) {\r\n              isLike.value = true;\r\n            }\r\n          }\r\n        })\r\n        .catch((err: any): void => {\r\n          \r\n        });\r\n    };\r\n\r\n    //查询购物袋的数目\r\n    //获取购物袋的商品总数量\r\n    let getShopbagCount:() => void = ():void => {\r\n        axios({\r\n          method: 'get',\r\n          url: '/shopcartCount'\r\n        }).then((result: any): void => {\r\n          \r\n          if (result.data.code === 4000) {\r\n            shopbagCount.value = result.data.result;\r\n            \r\n          }\r\n        }).catch((err: any): void => {\r\n         \r\n          \r\n        })\r\n      }\r\n\r\n    //收藏或取消收藏商品\r\n    let likeProduct: () => void = (): void | undefined => {\r\n      let url: string = isLike.value ? \"/notlike\" : \"/like\";\r\n\r\n      axios({\r\n        method: \"post\",\r\n        url,\r\n        data: {\r\n          pid: pid.value,\r\n        },\r\n      })\r\n        .then((result: any): void => {\r\n          Toast(result.data.msg);\r\n\r\n          if (result.data.code === 700) {\r\n            //token无效, 没有登录\r\n            return router.push({ name: \"Login\" });\r\n          }\r\n\r\n          if (result.data.code === 800) {\r\n            isLike.value = true;\r\n          } else if (result.data.code === 900 && result.data.result === 1) {\r\n            isLike.value = false;\r\n          }\r\n        })\r\n        .catch((err: any): void => {\r\n          \r\n        });\r\n    };\r\n\r\n    //加入购物袋\r\n    let addShopbag: () => void = (): void => {\r\n      //获取商品的pid\r\n      //获取商品数量\r\n\r\n      //获取商品的规格\r\n\r\n      \r\n\r\n      \r\n\r\n      let rule: Array<string> = [];\r\n      productDetail.value.rulesData.forEach((item: any): void => {\r\n        rule.push(item.subRule[item.activeIndex].title);\r\n      });\r\n\r\n      axios({\r\n        method: \"post\",\r\n        url: \"/addShopcart\",\r\n        data: {\r\n          pid: pid.value,\r\n          count: count.value,\r\n          rule: rule.join(\"/\"),\r\n        },\r\n      })\r\n        .then((result: any): void | undefined => {\r\n          if (result.data.code === 700) {\r\n            Toast(result.data.msg);\r\n            //token无效, 没有登录\r\n            router.push({ name: \"Login\" });\r\n            return;\r\n          }\r\n\r\n          \r\n\r\n          if (result.data.code === 3000) {\r\n            Toast(\"加入购物袋成功\");\r\n            shopbagCount.value = Number(shopbagCount.value) + count.value;\r\n          } else {\r\n            Toast(\"加入购物袋失败\");\r\n          }\r\n        })\r\n        .catch((err: any): void => {\r\n          \r\n        });\r\n    };\r\n\r\n    onMounted(() => {\r\n      pid.value = route.params.pid;\r\n      findCurrentLike(pid.value);\r\n      getShopbagCount();\r\n      getProductDetailByPid(pid.value);\r\n      findCurrentLike(pid.value);\r\n    });\r\n\r\n    return {\r\n      count,\r\n      pid,\r\n      productDetail,\r\n      isLike,\r\n      shopbagCount,\r\n      likeProduct,\r\n      addShopbag,\r\n      selectRule,\r\n      findCurrentLike\r\n    };\r\n  },\r\n});\r\n","import { render } from \"./Detail.vue?vue&type=template&id=5ddea1b1&scoped=true&ts=true\"\nimport script from \"./Detail.vue?vue&type=script&lang=ts\"\nexport * from \"./Detail.vue?vue&type=script&lang=ts\"\n\nimport \"./Detail.vue?vue&type=style&index=0&id=5ddea1b1&lang=less&scoped=true\"\n\nimport exportComponent from \"D:\\\\database\\\\rx-ts-project\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-5ddea1b1\"]])\n\nexport default __exports__"],"names":["_hoisted_1","class","render","_ctx","_cache","$props","$setup","$data","$options","_component_van_nav_bar","_resolveComponent","_openBlock","_createElementBlock","_createVNode","title","rightText","fixed","onClickLeft","back","onClickRight","clickRight","defineComponent","name","props","type","String","default","Boolean","setup","emit","router","useRouter","go","__exports__","_withScopeId","n","_pushScopeId","_popScopeId","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","_createElementVNode","_hoisted_15","_hoisted_16","_hoisted_17","_hoisted_18","_component_Navi","_component_van_stepper","_component_van_action_bar_icon","_component_van_action_bar_button","_component_van_action_bar","src","productDetail","large_img","alt","_toDisplayString","enname","price","_Fragment","_renderList","rulesData","v1","i1","key","subRule","v2","i2","_normalizeClass","active","activeIndex","onClick","$event","selectRule","modelValue","count","theme","desc","item","index","_withCtx","to","icon","text","color","badge","shopbagCount","isLike","likeProduct","addShopbag","_","components","Navi","route","useRoute","ref","pid","getProductDetailByPid","axios","method","url","params","then","result","data","code","split","rules","forEach","rulesItem","rule","r","push","value","catch","err","findCurrentLike","length","getShopbagCount","msg","join","Number","onMounted"],"sourceRoot":""}