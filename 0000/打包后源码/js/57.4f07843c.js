"use strict";(self["webpackChunkrx_ts"]=self["webpackChunkrx_ts"]||[]).push([[57],{6478:function(e,t,o){o.d(t,{Z:function(){return d}});var s=o(3396);const a={class:"navi"};function n(e,t,o,n,i,l){const r=(0,s.up)("van-nav-bar");return(0,s.wg)(),(0,s.iD)("div",a,[(0,s.Wm)(r,{title:e.title,"left-text":"返回","right-text":e.rightText,fixed:e.fixed,"left-arrow":"",onClickLeft:e.back,onClickRight:e.clickRight},null,8,["title","right-text","fixed","onClickLeft","onClickRight"])])}var i=o(678),l=(0,s.aZ)({name:"Navi",props:{title:{type:String,default:""},rightText:{type:String,default:""},fixed:{type:Boolean,default:!1}},setup(e,{emit:t}){let o=(0,i.tv)(),s=()=>{o.go(-1)},a=()=>{t("click-right")};return{back:s,clickRight:a}}}),r=o(89);const c=(0,r.Z)(l,[["render",n],["__scopeId","data-v-40ff0b7a"]]);var d=c},9057:function(e,t,o){o.r(t),o.d(t,{default:function(){return y}});var s=o(3396);const a=e=>((0,s.dD)("data-v-c2bf3670"),e=e(),(0,s.Cn)(),e),n={class:"secure"},i=a((()=>(0,s._)("div",{class:"secure-bg"},null,-1))),l={class:"secure-box"},r={class:"btn-box"},c=(0,s.Uk)("退出登录"),d={class:"popup-item"},u=a((()=>(0,s._)("div",{class:"password-text"},"修改密码",-1))),p={class:"login-btn"},m=(0,s.Uk)("确认修改");function w(e,t,o,a,w,v){const f=(0,s.up)("Navi"),g=(0,s.up)("van-cell"),h=(0,s.up)("van-button"),k=(0,s.up)("van-field"),b=(0,s.up)("van-form"),C=(0,s.up)("van-popup");return(0,s.wg)(),(0,s.iD)("div",n,[(0,s.Wm)(f,{title:"安全中心",fixed:!0}),i,(0,s._)("div",l,[(0,s._)("div",null,[(0,s.Wm)(g,{title:"修改密码",isLink:"",onClick:e.openPasswordPopup},null,8,["onClick"]),(0,s.Wm)(g,{title:"注销账号",isLink:"",onClick:e.destroyAccount},null,8,["onClick"])])]),(0,s._)("div",r,[(0,s.Wm)(h,{round:"",block:"",color:"#0C34BA",onClick:e.logout},{default:(0,s.w5)((()=>[c])),_:1},8,["onClick"])]),(0,s.Wm)(C,{class:"popup-box",closeable:"",show:e.isOpen,"onUpdate:show":t[0]||(t[0]=t=>e.isOpen=t),position:"bottom"},{default:(0,s.w5)((()=>[(0,s._)("div",d,[u,(0,s.Wm)(b,{onSubmit:e.confirmPassword},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.passwords,((t,o)=>((0,s.wg)(),(0,s.j4)(k,{key:o,type:t.isPassword?"password":"text",label:t.title,placeholder:"输入密码",modelValue:t.password,"onUpdate:modelValue":e=>t.password=e,"right-icon":t.isPassword?"closed-eye":"eye-o",onClickRightIcon:o=>e.viewPassword(t),autocomplete:"off",rules:[{required:!0,message:"密码必填"},{pattern:/^[A-Za-z]\w{5,15}$/,message:"密码支持数字字母下划线组合，且必须以字母开头，6-16位"}]},null,8,["type","label","modelValue","onUpdate:modelValue","right-icon","onClickRightIcon"])))),128)),(0,s._)("div",p,[(0,s.Wm)(h,{round:"",block:"",color:"#0C34BA","native-type":"submit"},{default:(0,s.w5)((()=>[m])),_:1})])])),_:1},8,["onSubmit"])])])),_:1},8,["show"])])}o(6743);var v=o(4691),f=(o(9905),o(9636)),g=o(4870),h=o(6478),k=o(678),b=o(6265),C=o.n(b),P=(0,s.aZ)({components:{Navi:h.Z},setup(){let e=(0,k.tv)(),t=(0,g.iH)(!1),o=(0,g.iH)({old:{password:"",isPassword:!0,title:"旧密码"},new:{password:"",isPassword:!0,title:"新密码"}}),s=e=>{e.isPassword=!e.isPassword},a=()=>{f.Z.confirm({title:"退出登录",message:"是否确认退出登录！",confirmButtonColor:"#0C34BA"}).then((()=>{localStorage.removeItem("token"),setTimeout((()=>{e.push({name:"Login"})}),1e3)}))},n=()=>{t.value=!0},i=()=>{C()({method:"POST",url:"/updatePassword",data:{oldPassword:o.value.old.password,password:o.value.new.password}}).then((t=>{(0,v.Z)(t.data.msg),"E001"==t.data.code&&(localStorage.removeItem("token"),setTimeout((()=>{e.push({name:"Login"})}),1e3))})).catch((e=>{}))},l=()=>{f.Z.confirm({title:"注销账号",message:"是否确认注销号，一旦确认无法恢复！",confirmButtonColor:"#0C34BA"}).then((()=>{C()({method:"POST",url:"/destroyAccount"}).then((t=>{(0,v.Z)(t.data.msg),"G001"==t.data.code&&(localStorage.removeItem("token"),setTimeout((()=>{e.push({name:"Login"})}),1e3))})).catch((e=>{}))})).catch((e=>{}))};return{isOpen:t,passwords:o,viewPassword:s,logout:a,openPasswordPopup:n,confirmPassword:i,destroyAccount:l}}}),x=o(89);const _=(0,x.Z)(P,[["render",w],["__scopeId","data-v-c2bf3670"]]);var y=_}}]);
//# sourceMappingURL=57.4f07843c.js.map