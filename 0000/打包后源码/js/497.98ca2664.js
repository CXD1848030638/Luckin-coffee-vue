"use strict";(self["webpackChunkrx_ts"]=self["webpackChunkrx_ts"]||[]).push([[497],{909:function(t,e,a){a.d(e,{Z:function(){return v}});var o=a(3396);const i=t=>((0,o.dD)("data-v-06618912"),t=t(),(0,o.Cn)(),t),r={class:"bg-box"},n=i((()=>(0,o._)("div",{class:"bg"},null,-1))),c={class:"bg-content"};function l(t,e,a,i,l,s){return(0,o.wg)(),(0,o.iD)("div",r,[n,(0,o._)("div",c,[(0,o.WI)(t.$slots,"default",{},void 0,!0)])])}var s=(0,o.aZ)({name:"Bg"}),d=a(89);const u=(0,d.Z)(s,[["render",l],["__scopeId","data-v-06618912"]]);var v=u},6478:function(t,e,a){a.d(e,{Z:function(){return d}});var o=a(3396);const i={class:"navi"};function r(t,e,a,r,n,c){const l=(0,o.up)("van-nav-bar");return(0,o.wg)(),(0,o.iD)("div",i,[(0,o.Wm)(l,{title:t.title,"left-text":"返回","right-text":t.rightText,fixed:t.fixed,"left-arrow":"",onClickLeft:t.back,onClickRight:t.clickRight},null,8,["title","right-text","fixed","onClickLeft","onClickRight"])])}var n=a(678),c=(0,o.aZ)({name:"Navi",props:{title:{type:String,default:""},rightText:{type:String,default:""},fixed:{type:Boolean,default:!1}},setup(t,{emit:e}){let a=(0,n.tv)(),o=()=>{a.go(-1)},i=()=>{e("click-right")};return{back:o,clickRight:i}}}),l=a(89);const s=(0,l.Z)(c,[["render",r],["__scopeId","data-v-40ff0b7a"]]);var d=s},1642:function(t,e,a){a.d(e,{Z:function(){return D}});var o=a(3396),i=a(7139);const r={class:"shopbag-item"},n={class:"shopbag-item-img"},c=["src"],l={class:"shopbag-item-content"},s={class:"shopbag-name"},d={class:"zhname-box"},u={class:"zhname one-text"},v={class:"rule one-text"},p={class:"enname one-text"},g={class:"price-count"},m={class:"price"},f={class:"count"};function h(t,e,a,h,_,w){return(0,o.wg)(),(0,o.iD)("div",r,[(0,o._)("div",n,[(0,o._)("img",{class:"auto-img",src:t.pro.small_img,alt:""},null,8,c)]),(0,o._)("div",l,[(0,o._)("div",s,[(0,o._)("div",d,[(0,o._)("div",u,(0,i.zw)(t.pro.name),1),(0,o._)("div",v,(0,i.zw)(t.pro.rule),1)]),(0,o._)("div",p,(0,i.zw)(t.pro.enname),1)]),(0,o._)("div",g,[(0,o._)("div",m,"¥"+(0,i.zw)(t.pro.price),1),(0,o._)("div",f,"x"+(0,i.zw)(t.pro.count),1)])])])}var _=(0,o.aZ)({name:"OrderPro",props:{pro:{type:Object,default(){return{}}}}}),w=a(89);const b=(0,w.Z)(_,[["render",h],["__scopeId","data-v-29d28766"]]);var D=b},6497:function(t,e,a){a.r(e),a.d(e,{default:function(){return j}});var o=a(3396),i=a(7139),r=a(9242);const n=t=>((0,o.dD)("data-v-36acd968"),t=t(),(0,o.Cn)(),t),c={class:"order"},l={class:"tab-content"},s=n((()=>(0,o._)("div",{class:"order-info"},"订单信息",-1))),d={class:"order-no"},u={class:"no"},v={class:"order-op"},p=["onClick"],g={key:1,class:"op"},m=n((()=>(0,o._)("div",{class:"finished"},"已完成",-1))),f=["onClick"],h={class:"order-pro"},_={class:"order-total"},w={class:"order-date"},b={class:"order-count"},D={class:"order-money"},k=n((()=>(0,o._)("div",{class:"left-circle circle"},null,-1))),x=n((()=>(0,o._)("div",{class:"right-circle circle"},null,-1)));function C(t,e,a,n,C,Z){const y=(0,o.up)("Navi"),z=(0,o.up)("van-icon"),O=(0,o.up)("OrderPro"),B=(0,o.up)("van-empty"),H=(0,o.up)("van-tab"),W=(0,o.up)("van-tabs"),R=(0,o.up)("Bg");return(0,o.wg)(),(0,o.iD)("div",c,[(0,o.Wm)(y,{title:"我的订单",fixed:!0}),(0,o._)("div",null,[(0,o.Wm)(R,null,{default:(0,o.w5)((()=>[(0,o.Wm)(W,{active:t.active,"onUpdate:active":e[0]||(e[0]=e=>t.active=e),color:"#0C34BA","line-height":"2",animated:"",swipeable:"",onChange:t.toggleTab},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(t.tabsData,((e,a)=>((0,o.wg)(),(0,o.j4)(H,{title:e.title,key:a},{default:(0,o.w5)((()=>[(0,o._)("div",l,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(t.orderData,((e,a)=>((0,o.wg)(),(0,o.iD)("div",{class:"order-product",key:a},[s,(0,o._)("div",d,[(0,o._)("div",u,"订单编号："+(0,i.zw)(e.oid),1),(0,o._)("div",v,[1===e.status?((0,o.wg)(),(0,o.iD)("div",{key:0,onClick:o=>t.confirm(e,a)},"确认收货",8,p)):((0,o.wg)(),(0,o.iD)("div",g,[m,(0,o._)("div",{class:"remove",onClick:o=>t.removeOrder(e.oid,a)},[(0,o.Wm)(z,{name:"delete-o"})],8,f)]))])]),(0,o._)("div",h,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.product,((t,e)=>((0,o.wg)(),(0,o.iD)("div",{class:"order-pro-item",key:e},[(0,o.Wm)(O,{pro:t},null,8,["pro"])])))),128))]),(0,o._)("div",_,[(0,o._)("div",w,(0,i.zw)(e.date),1),(0,o._)("div",b,"共计 "+(0,i.zw)(e.count)+" 件商品",1),(0,o._)("div",D,"订单金额：¥"+(0,i.zw)(e.total),1),k,x])])))),128)),(0,o.wy)((0,o.Wm)(B,{description:"没有订单数据！"},null,512),[[r.F8,0===t.orderData.length]])])])),_:2},1032,["title"])))),128))])),_:1},8,["active","onChange"])])),_:1})])])}a(9905);var Z=a(9636),y=(a(6743),a(4691)),z=a(4870),O=a(6478),B=a(909),H=a(1642),W=a(6265),R=a.n(W),E=a(678);class I{formatDate(t,e){Object.prototype.toString.call(t)!==["object Date"]&&(t=new Date(t));let a=/(y+)/;if(a.test(e)){let a=RegExp.$1,o=t.getFullYear().toString(),i=o.slice(4-a.length);e=e.replace(a,i)}let o={M:t.getMonth()+1,d:t.getDate(),h:t.getHours(),m:t.getMinutes(),s:t.getSeconds()};for(let i in o){let t=new RegExp(`(${i}+)`);if(t.test(e)){let t=RegExp.$1;e=e.replace(t,1===t.length||o[i]>=10?o[i]:`0${o[i]}`)}}return e}}const L=new I;var M=(0,o.aZ)({name:"Order",components:{Navi:O.Z,Bg:B.Z,OrderPro:H.Z},setup(){let t=(0,E.tv)(),e=(0,z.iH)(0),a=(0,z.iH)(0),i=(0,z.iH)(0),r=(0,z.iH)([{title:"全部"},{title:"进行中"},{title:"已完成"}]),n=(0,z.iH)([]),c=()=>{R()({method:"get",url:"/findOrder",params:{status:e.value}}).then((e=>{if(700===e.data.code)return(0,y.Z)(e.data.msg),void t.push({name:"Login"});if(7e4===e.data.code){let t=[];e.data.result.forEach((e=>{e.small_img=e.smallImg,-1===t.indexOf(e.oid)&&t.push(e.oid)}));let a=[];t.forEach((t=>{let o={oid:t,product:[],count:0,total:0};e.data.result.forEach((e=>{t===e.oid&&(void 0===o.status&&(o.status=e.status,o.date=L.formatDate(e.createdAt,"yyyy-MM-dd hh:mm:ss")),o.product.push(e),o.count+=e.count,o.total+=e.count*e.price)})),a.push(o)})),n.value=a}})).catch((t=>{}))},l=()=>{c()},s=(a,o)=>{Z.Z.confirm({title:"收货提示",message:"是否确定收货！",confirmButtonColor:"#0C34BA"}).then((()=>{R()({method:"post",url:"/receive",data:{oid:a.oid}}).then((i=>{(0,y.Z)(i.data.msg),700!==i.data.code?8e4===i.data.code&&(0===e.value?a.status=2:1===a.status&&n.value.splice(o,1)):t.push({name:"Login"})})).catch((t=>{}))})).catch((t=>{}))},d=(e,a)=>{Z.Z.confirm({title:"删除订单",message:"是否确定删除该订单！",confirmButtonColor:"#0C34BA"}).then((()=>{R()({method:"post",url:"/removeOrder",data:{oid:e}}).then((e=>{(0,y.Z)(e.data.msg),700!==e.data.code?9e4===e.data.code&&n.value.splice(a,1):t.push({name:"Login"})})).catch((t=>{}))})).catch((t=>{}))};return(0,o.bv)((()=>{c()})),{active:e,count:a,total:i,tabsData:r,orderData:n,toggleTab:l,confirm:s,removeOrder:d}}}),S=a(89);const $=(0,S.Z)(M,[["render",C],["__scopeId","data-v-36acd968"]]);var j=$}}]);
//# sourceMappingURL=497.98ca2664.js.map